<!DOCTYPE html>
<html>
<head>
    <title>ChatMCP Web Interface</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>
    <header>
        <h1>ChatMCP Web Interface</h1>
    </header>
    
    <div class="container">
        <main class="chat-container">
            <div class="status" id="tool-status">Status: Ready</div>
            <div class="chat-messages" id="chat-messages"></div>
            <div class="input-container">
                <input type="text" id="user-input" placeholder="Type your message here...">
                <button id="send-btn">Send</button>
            </div>
            <button id="check-response" class="subtle-button">Check for Response</button>
            <div class="tool-result" id="tool-result">
                <h3>Tool Output:</h3>
                <pre id="tool-output"></pre>
            </div>
        </main>
        
        <aside class="sidebar">
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion('current-llm')">Current LLM</div>
                <div class="accordion-content" id="current-llm">
                    <p id="current-provider-model">Provider: Loading...<br>Model: Loading...</p>
                    <pre id="token-usage">No tokens used yet</pre>
                    <button id="refresh-status">Refresh Status</button>
                </div>
            </div>
            
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion('switch-llm')">Switch LLM</div>
                <div class="accordion-content" id="switch-llm">
                    <button id="fetch-providers-btn">Fetch Providers</button>
                    <select id="provider-dropdown">
                        <option value="">Select a provider</option>
                    </select>
                    <button id="fetch-models-btn">Fetch Models</button>
                    <select id="model-dropdown">
                        <option value="">Select a model</option>
                    </select>
                    <button id="switch-btn">Switch</button>
                    <button id="refresh-btn">Refresh All Models</button>
                    <p id="switch-status"></p>
                </div>
            </div>
            
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion('tools-section')">Available Tools</div>
                <div class="accordion-content" id="tools-section">
                    <button id="refresh-metadata-btn">Refresh Metadata</button>
                    <div id="metadata-content">
                        <p>Click 'Refresh Metadata' to load tools, resources, and prompts.</p>
                    </div>
                </div>
            </div>
            
            <div class="accordion">
                <div class="accordion-header" onclick="toggleAccordion('help-section')">Help</div>
                <div class="accordion-content" id="help-section">
                    <h3>Commands</h3>
                    <ul>
                        <li><strong>/switch [provider] [model]</strong> - Switch LLM provider and model</li>
                        <li><strong>/refresh</strong> - Refresh all models</li>
                        <li><strong>/clear</strong> - Clear chat history</li>
                        <li><strong>/help</strong> - Show help information</li>
                    </ul>
                    <h3>Tips</h3>
                    <ul>
                        <li>Use tools section to see available capabilities</li>
                        <li>For search, try <code>brave_web_search</code></li>
                        <li>For GitHub integration, use <code>github</code> tools</li>
                    </ul>
                </div>
            </div>
        </aside>
    </div>
    
    <div class="loading" id="loading">Processing...</div>
    
    <!-- Load JavaScript -->
    <script src="{{ url_for('static', filename='js/ui.js') }}"></script>
    <script src="{{ url_for('static', filename='js/api.js') }}"></script>
    <script src="{{ url_for('static', filename='js/chat.js') }}"></script>
</body>
</html>